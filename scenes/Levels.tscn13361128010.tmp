[gd_scene load_steps=9 format=3 uid="uid://c7xltcmx2w6p5"]

[ext_resource type="PackedScene" uid="uid://c81ugl3yfuic1" path="res://scenes/Map.tscn" id="1_5ch6c"]
[ext_resource type="Script" uid="uid://cqkh4mng0awws" path="res://code/levels.gd" id="1_c6mwt"]
[ext_resource type="Script" uid="uid://bcr62e23x8qa0" path="res://code/map.gd" id="2_c6mwt"]
[ext_resource type="PackedScene" uid="uid://yrv80x2vkau4" path="res://scenes/Ben.tscn" id="3_4e448"]
[ext_resource type="PackedScene" uid="uid://dhlcch7mrsbx6" path="res://scenes/Bully.tscn" id="4_elgn6"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_2r41h"]

[sub_resource type="Sky" id="Sky_2q6dc"]
sky_material = SubResource("ProceduralSkyMaterial_2r41h")
radiance_size = 4

[sub_resource type="Environment" id="Environment_w7c3h"]
background_mode = 2
sky = SubResource("Sky_2q6dc")
tonemap_mode = 2
glow_enabled = true

[node name="Levels" type="Node3D"]
script = ExtResource("1_c6mwt")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 15.2284, 0)
light_color = Color(0.65422, 0.742696, 0.81467, 1)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_w7c3h")

[node name="Map" parent="." instance=ExtResource("1_5ch6c")]
script = ExtResource("2_c6mwt")

[node name="Bully" parent="." instance=ExtResource("4_elgn6")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -5, 1, -12.1)

[node name="Time_Ui" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="top-left-Ui" type="HBoxContainer" parent="Time_Ui"]
anchors_preset = -1
anchor_left = 0.0119792
anchor_top = 0.00648148
anchor_right = 0.224479
anchor_bottom = 0.137963
theme_override_constants/separation = 10
alignment = 2
metadata/_edit_use_anchors_ = true

[node name="Text" type="VBoxContainer" parent="Time_Ui/top-left-Ui"]
layout_mode = 2

[node name="Time" type="Label" parent="Time_Ui/top-left-Ui/Text"]
layout_mode = 2
theme_override_font_sizes/font_size = 50
text = "Nighttime :"
horizontal_alignment = 2
vertical_alignment = 1

[node name="Days" type="Label" parent="Time_Ui/top-left-Ui/Text"]
layout_mode = 2
theme_override_font_sizes/font_size = 50
text = "Day :"
vertical_alignment = 1

[node name="Timer" type="Timer" parent="Time_Ui/top-left-Ui"]
one_shot = true
ignore_time_scale = true

[node name="Value" type="VBoxContainer" parent="Time_Ui/top-left-Ui"]
layout_mode = 2

[node name="Countdown" type="Label" parent="Time_Ui/top-left-Ui/Value"]
layout_mode = 2
theme_override_font_sizes/font_size = 50
text = "00:00"
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="DayCounts" type="Label" parent="Time_Ui/top-left-Ui/Value"]
layout_mode = 2
theme_override_font_sizes/font_size = 50
text = "00"
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="center2" type="ColorRect" parent="Time_Ui"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -2.0
offset_top = -6.0
offset_right = 2.0
offset_bottom = 6.0
grow_horizontal = 2
grow_vertical = 2
rotation = -1.56761
pivot_offset = Vector2(2, 6)

[node name="Ben" parent="Time_Ui" instance=ExtResource("3_4e448")]
transform = Transform3D(0.852704, 0, 0.522394, 0, 1, 0, -0.522394, 0, 0.852704, 9.53674e-07, 1.04074, 4.24781)
visible = false
slide_on_ceiling = false

[node name="Ben2" parent="." instance=ExtResource("3_4e448")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 4.13112)

[connection signal="detected" from="Bully" to="Time_Ui/Ben" method="_on_bully_detected"]
[connection signal="start_day" from="Bully" to="." method="_on_bully_start_day"]
[connection signal="timeout" from="Time_Ui/top-left-Ui/Timer" to="." method="_on_timer_timeout"]
[connection signal="pointed" from="Time_Ui/Ben" to="Map" method="_on_ben_pointed"]
[connection signal="showui" from="Time_Ui/Ben" to="." method="_on_ben_showui"]
[connection signal="snacks" from="Time_Ui/Ben" to="Map" method="_on_ben_snacks"]
